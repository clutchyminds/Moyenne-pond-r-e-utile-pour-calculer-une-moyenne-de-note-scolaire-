<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Calculateur de moyenne pondérée</title>
    <style>
        body {
            background: #f6f8fa;
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #222;
            margin: 0;
        }
        .container {
            max-width: 500px;
            background: #fff;
            margin: 50px auto;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.10);
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 20px;
            color: #1877f2;
        }
        .noteEntry {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        input[type="number"], select {
            padding: 7px 10px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            font-size: 1rem;
            width: 85px;
        }
        select {
            width: 75px;
        }
        button {
            background: #1877f2;
            color: #fff;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #145ac3;
        }
        .removeBtn {
            background: #e53e3e;
            padding: 4px 10px;
            font-size: 1rem;
        }
        .removeBtn:hover {
            background: #b91c1c;
        }
        #addNote {
            margin-top: 8px;
            margin-bottom: 15px;
            background: #3bb273;
        }
        #addNote:hover {
            background: #2e874d;
        }
        #result {
            background: #e7f3f7;
            border-radius: 6px;
            color: #1877f2;
            font-weight: bold;
            padding: 12px;
            margin-top: 8px;
            font-size: 1.2em;
            text-align: center;
            min-height: 40px;
        }
        @media (max-width: 600px) {
            .container { padding: 20px 5px; }
            .noteEntry { flex-direction: column; gap: 5px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculateur de moyenne pondérée</h1>
        <form id="notesForm">
            <div id="inputsContainer">
                <div class="noteEntry">
                    <input type="number" step="0.01" placeholder="Note" class="note" required>
                    <select class="barème">
                        <option value="10">sur 10</option>
                        <option value="20" selected>sur 20</option>
                    </select>
                    <input type="number" placeholder="Coefficient" class="coef" min="0.01" step="0.01" value="1" required>
                    <button type="button" class="removeBtn">Supprimer</button>
                </div>
            </div>
            <button type="button" id="addNote">Ajouter une note</button><br>
            <button type="submit" style="margin-top:10px;">Calculer la moyenne</button>
        </form>
        <h2 style="text-align:center;margin-top:25px;">Résultat :</h2>
        <p id="result"></p>
    </div>
    <script>
        // Ajouter une nouvelle ligne de note
        document.getElementById('addNote').addEventListener('click', function() {
            const container = document.getElementById('inputsContainer');
            const entry = document.createElement('div');
            entry.className = 'noteEntry';
            entry.innerHTML = `
                <input type="number" step="0.01" placeholder="Note" class="note" required>
                <select class="barème">
                    <option value="10">sur 10</option>
                    <option value="20" selected>sur 20</option>
                </select>
                <input type="number" placeholder="Coefficient" class="coef" min="0.01" step="0.01" value="1" required>
                <button type="button" class="removeBtn">Supprimer</button>
            `;
            container.appendChild(entry);

            // ajout du bouton supprimer
            entry.querySelector('.removeBtn').addEventListener('click', function() {
                entry.remove();
            });
        });

        // Gestion suppression de la première note
        document.querySelector('.removeBtn').addEventListener('click', function(event) {
            event.target.parentElement.remove();
        });

        // Calcul de la moyenne
        document.getElementById('notesForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const notes = document.querySelectorAll('.noteEntry');
            let sommePonderee = 0;
            let sommeCoef = 0;
            let erreur = false;

            notes.forEach(function(entry) {
                const note = parseFloat(entry.querySelector('.note').value);
                const bareme = parseFloat(entry.querySelector('.barème').value);
                const coef = parseFloat(entry.querySelector('.coef').value);

                if (isNaN(note) || isNaN(coef) || coef <= 0) {
                    erreur = true;
                    return;
                }
                // Conversion de la note sur 20
                let noteSur20 = bareme === 10 ? note * 2 : note;
                sommePonderee += noteSur20 * coef;
                sommeCoef += coef;
            });

            if (erreur) {
                document.getElementById('result').textContent = "Erreur dans les valeurs saisies.";
            } else if (sommeCoef === 0) {
                document.getElementById('result').textContent = "Veuillez entrer au moins une note avec un coefficient supérieur à 0.";
            } else {
                const moyenne = sommePonderee / sommeCoef;
                document.getElementById('result').textContent = "Moyenne calculée sur 20 : " + moyenne.toFixed(2);
            }
        });
    </script>
</body>
</html>
